---
import BaseLayout from '@/layouts/BaseLayout.astro'
import { getCollection } from 'astro:content'
import type { CollectionEntry } from 'astro:content'

export async function getStaticPaths() {
  const entries = await getCollection('commands')
  return entries.map((entry) => ({ params: { slug: entry.slug }, props: { entry } }))
}

const { entry } = Astro.props as { entry: CollectionEntry<'commands'> }
const { Content } = await entry.render()
const { data } = entry
---
<BaseLayout title={`${data.title} - Linux Cheatsheet`}>
  <article class="max-w-none space-y-6" data-vt-target="card">
    <a id="back-link" href="/" aria-label="返回上一页" class="fixed right-4 top-20 z-50 glass rounded-full w-11 h-11 flex items-center justify-center border border-white/10 interactive hover:bg-white/10">
      <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" class="opacity-80">
        <polyline points="15 6 9 12 15 18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span class="sr-only">返回</span>
    </a>
    <h1 class="mb-2">{data.title}</h1>
    {data.description && <p class="lead text-fg-muted">{data.description}</p>}
    <div class="mt-8 space-y-6">
      <Content />
    </div>
  </article>
</BaseLayout>
