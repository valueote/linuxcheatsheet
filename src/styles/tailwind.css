@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Mono Carbon (light) */
    --bg: 248 248 248; /* #f8f8f8 */
    --fg: 23 23 23; /* #171717 */
    --fg-muted: 100 116 139; /* slate-500 */
    --brand: 23 23 23; /* neutral emphasis */

    /* Motion tokens */
    --dur-fast: 160ms;
    --dur-base: 220ms;
    --dur-slow: 420ms;
    --ease-smooth: cubic-bezier(0.22,1,0.36,1);
  }

  [data-theme="dark"] {
    /* Mono Carbon (dark) */
    --bg: 12 12 14;
    --fg: 236 236 240;
    --fg-muted: 148 163 184;
    --brand: 255 255 255; /* neutral emphasis */
    color-scheme: dark;
  }

  html {
    color-scheme: light dark;
    background-color: rgb(var(--bg));
    font-size: 20px;
  }

  body {
    @apply text-fg bg-bg antialiased selection:bg-brand/20 selection:text-fg font-sans;
  }
}

@layer components {
  .glass {
    /* Remove backdrop blur entirely; keep subtle translucent bg + border */
    @apply bg-white/5 dark:bg-white/5 border border-white/10 shadow-soft;
  }

  .card-hover {
    @apply transform-gpu will-change-transform transition duration-200 ease-smooth hover:-translate-y-0.5 hover:shadow-elevated active:translate-y-0 active:scale-[.995];
  }

  /* Reveal on enter */
  .reveal { @apply transition duration-500 ease-smooth; }
  .reveal.hide { @apply opacity-0 translate-y-1; }
  .reveal.show { @apply opacity-100 translate-y-0; }

  .interactive { @apply transition duration-200 ease-smooth; }

  /* During View Transition, remove expensive backdrop blur on the origin */
  .vt-no-blur { backdrop-filter: none !important; -webkit-backdrop-filter: none !important; }

  /* Customize the shared element animation to avoid zooming the blurred card */
  @keyframes vt-fade-in { from { opacity: 0.001 } to { opacity: 1 } }
  ::view-transition-old(card-active) { animation: none; opacity: 0; }
  ::view-transition-new(card-active) { animation: vt-fade-in var(--dur-base) var(--ease-smooth) both; }

  /* Keep root visible (no black flash); disable default animation */
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none;
  }
  

  /* Custom dropdown menu for tag filter */
  .shadow-elevated { box-shadow: 0 20px 40px -20px rgba(0,0,0,0.45); }
  #tag-menu { backdrop-filter: blur(10px); }
  #tag-menu .menu-item[aria-checked="true"] { @apply bg-white/10; }

  /* Theme switch */
  .theme-switch { @apply inline-flex items-center justify-center; }
  .theme-switch .switch-track { @apply rounded-full transition duration-200 ease-smooth; width: 48px; height: 26px; position: relative; }
  /* Better contrast in light/dark */
  .theme-switch .switch-track { background-color: rgb(var(--fg) / 0.08); border: 1px solid rgb(var(--fg) / 0.15); }
  html[data-theme="dark"] .theme-switch .switch-track { background-color: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.18); }
  .theme-switch .switch-thumb { @apply rounded-full transition duration-200 ease-smooth; width: 18px; height: 18px; position: absolute; top: 4px; left: 4px; transform: translateX(0); background-color: rgb(var(--fg)); }
  .theme-switch[aria-checked="true"] .switch-thumb { transform: translateX(22px); }
  .theme-switch[aria-checked="true"] .switch-track { background-color: rgb(var(--brand) / 0.25); }
  .theme-switch:focus-visible .switch-track { @apply ring-2 ring-black/20 dark:ring-white/25; }
  /* Icons inside switch */
  .theme-switch .icon { position: absolute; width: 14px; height: 14px; top: 50%; transform: translateY(-50%); color: rgb(var(--fg)); opacity: 0.55; transition: opacity var(--dur-base) var(--ease-smooth); }
  .theme-switch .icon-sun { left: 6px; }
  .theme-switch .icon-moon { right: 6px; }
  .theme-switch[aria-checked="true"] .icon-moon { opacity: 1; }
  .theme-switch[aria-checked="false"] .icon-sun { opacity: 1; }
}
