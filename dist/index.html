<!DOCTYPE html><html lang="zh-CN" data-theme="dark" class="no-js"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="现代、清晰的 Linux 命令速查"><link rel="icon" href="/favicon.svg"><title>Linux Cheatsheet</title><link rel="stylesheet" href="/_astro/_slug_.BHd2EvDI.css"><script type="module">const a=document.getElementById("theme-toggle"),n=document.documentElement,c="theme";function o(t){n.setAttribute("data-theme",t),localStorage.setItem(c,t),a?.setAttribute("aria-checked",String(t==="dark"))}a?.addEventListener("click",()=>{const t=n.getAttribute("data-theme")==="dark"?"light":"dark";o(t)});const e=localStorage.getItem(c);e&&o(e);e||a?.setAttribute("aria-checked",String(n.getAttribute("data-theme")==="dark"));document.documentElement.classList.remove("no-js");
</script></head> <body class="min-h-screen"> <div class="mesh-bg mesh-a"></div> <header class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-bg/60 border-b border-white/10"> <nav class="container flex h-14 items-center justify-between"> <a href="/" class="font-semibold tracking-tight">Linux Cheatsheet</a> <div class="flex items-center gap-3 text-sm text-fg-muted"> <button id="theme-toggle" type="button" role="switch" aria-checked="false" class="theme-switch interactive" title="切换主题"> <span class="sr-only">切换主题</span> <span class="switch-track"> <svg class="icon icon-sun" viewBox="0 0 24 24" aria-hidden="true"> <circle cx="12" cy="12" r="4" fill="currentColor"></circle> <g stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"> <path d="M12 2v2M12 20v2M4 12H2M22 12h-2M5 5l-1.5-1.5M20.5 20.5L19 19M5 19l-1.5 1.5M20.5 3.5L19 5"></path> </g> </svg> <span class="switch-thumb"></span> <svg class="icon icon-moon" viewBox="0 0 24 24" aria-hidden="true"> <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="currentColor"></path> </svg> </span> </button> </div> </nav> </header> <main class="container py-10 lg:py-16">  <section class="text-center space-y-6"> <h1 class="text-3xl md:text-5xl font-bold tracking-tight">哪条命令？</h1> <p class="text-fg-muted">搜索或从下方选择一个常用命令</p> <form action="/" method="GET" role="search" class="mx-auto max-w-xl flex flex-col sm:flex-row gap-2" autocomplete="off"> <input name="q" placeholder="输入命令，如 grep、sed" class="flex-1 glass rounded-xl px-4 py-3 outline-none focus:ring-2 ring-black/20 dark:ring-white/25 interactive"> <div class="relative shrink-0"> <button id="tag-filter-btn" type="button" class="glass rounded-xl px-3 py-3 text-sm text-fg outline-none border border-white/10 interactive flex items-center gap-1 min-w-[8.5rem] justify-between" aria-haspopup="menu" aria-expanded="false"> <span id="tag-filter-label">全部标签</span> <svg width="16" height="16" viewBox="0 0 24 24" class="opacity-70"><polyline points="6 9 12 15 18 9" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"></polyline></svg> </button> <div id="tag-menu" class="hidden absolute left-0 z-20 mt-1 min-w-[8.5rem] rounded-xl border border-white/10 glass shadow-elevated py-1" role="menu" aria-labelledby="tag-filter-btn"> <button class="menu-item w-full text-left px-3 py-2 text-sm hover:bg-white/5" data-tag="" role="menuitemradio" aria-checked="true">全部标签</button> <button class="menu-item w-full text-left px-3 py-2 text-sm hover:bg-white/5" data-tag="文件操作" role="menuitemradio" aria-checked="false">文件操作</button><button class="menu-item w-full text-left px-3 py-2 text-sm hover:bg-white/5" data-tag="文本处理" role="menuitemradio" aria-checked="false">文本处理</button><button class="menu-item w-full text-left px-3 py-2 text-sm hover:bg-white/5" data-tag="权限管理" role="menuitemradio" aria-checked="false">权限管理</button><button class="menu-item w-full text-left px-3 py-2 text-sm hover:bg-white/5" data-tag="磁盘" role="menuitemradio" aria-checked="false">磁盘</button><button class="menu-item w-full text-left px-3 py-2 text-sm hover:bg-white/5" data-tag="系统" role="menuitemradio" aria-checked="false">系统</button><button class="menu-item w-full text-left px-3 py-2 text-sm hover:bg-white/5" data-tag="网络" role="menuitemradio" aria-checked="false">网络</button> </div> </div> </form> </section> <section id="cards" class="mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"> <a href="/commands/awk" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">awk</h3> <p class="mt-1 text-sm text-fg-muted">面向列的文本处理工具，可做筛选、格式化与聚合。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/cat" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">cat</h3> <p class="mt-1 text-sm text-fg-muted">输出文件内容，支持合并与显示行号。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/chmod" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="权限管理"> <h3 class="text-base font-semibold">chmod</h3> <p class="mt-1 text-sm text-fg-muted">修改文件或目录的权限（读/写/执行）。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">权限管理</span> </div> </a><a href="/commands/chown" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="权限管理"> <h3 class="text-base font-semibold">chown</h3> <p class="mt-1 text-sm text-fg-muted">修改文件或目录的所有者与所属组。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">权限管理</span> </div> </a><a href="/commands/cp" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">cp</h3> <p class="mt-1 text-sm text-fg-muted">复制文件或目录。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/curl" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="网络"> <h3 class="text-base font-semibold">curl</h3> <p class="mt-1 text-sm text-fg-muted">进行 HTTP(S) 请求与文件下载。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">网络</span> </div> </a><a href="/commands/cut" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">cut</h3> <p class="mt-1 text-sm text-fg-muted">从每行文本中按列/字符/字节截取内容。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/df" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="磁盘"> <h3 class="text-base font-semibold">df</h3> <p class="mt-1 text-sm text-fg-muted">显示文件系统磁盘空间占用。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">磁盘</span> </div> </a><a href="/commands/du" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="磁盘"> <h3 class="text-base font-semibold">du</h3> <p class="mt-1 text-sm text-fg-muted">查看目录或文件占用的磁盘空间大小。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">磁盘</span> </div> </a><a href="/commands/echo" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">echo</h3> <p class="mt-1 text-sm text-fg-muted">输出文本或变量值到终端。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/find" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">find</h3> <p class="mt-1 text-sm text-fg-muted">按条件在目录树中查找文件或目录。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/grep" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">grep</h3> <p class="mt-1 text-sm text-fg-muted">在文本中按正则/字符串搜索匹配的行。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/head" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">head</h3> <p class="mt-1 text-sm text-fg-muted">查看文件开头的若干行或字节数。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/less" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">less</h3> <p class="mt-1 text-sm text-fg-muted">分页查看文件或管道输出，支持搜索与跳转。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/ln" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">ln</h3> <p class="mt-1 text-sm text-fg-muted">创建硬链接或符号链接（软链接）。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/ls" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">ls</h3> <p class="mt-1 text-sm text-fg-muted">列出目录内容（文件与子目录）。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/mkdir" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">mkdir</h3> <p class="mt-1 text-sm text-fg-muted">创建目录，可一次创建多级父目录。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/mv" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">mv</h3> <p class="mt-1 text-sm text-fg-muted">移动或重命名文件/目录。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/ps" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="系统"> <h3 class="text-base font-semibold">ps</h3> <p class="mt-1 text-sm text-fg-muted">查看当前系统中的进程。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">系统</span> </div> </a><a href="/commands/rm" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">rm</h3> <p class="mt-1 text-sm text-fg-muted">删除文件或目录（不可逆）。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/rmdir" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">rmdir</h3> <p class="mt-1 text-sm text-fg-muted">删除空目录（仅适用于空目录）。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/sed" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">sed</h3> <p class="mt-1 text-sm text-fg-muted">流编辑器，用于替换、删除、插入文本等。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/sort" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">sort</h3> <p class="mt-1 text-sm text-fg-muted">对文本行进行排序，支持按列和数字排序。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/tail" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">tail</h3> <p class="mt-1 text-sm text-fg-muted">查看文件末尾内容，支持实时跟随日志追加。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/tar" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">tar</h3> <p class="mt-1 text-sm text-fg-muted">打包与解包归档（常配合 gzip/bzip2/xz 压缩）。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/tee" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">tee</h3> <p class="mt-1 text-sm text-fg-muted">将标准输入同时写入文件并继续输出到终端。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/touch" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文件操作"> <h3 class="text-base font-semibold">touch</h3> <p class="mt-1 text-sm text-fg-muted">创建空文件或更新文件的时间戳。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文件操作</span> </div> </a><a href="/commands/tr" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">tr</h3> <p class="mt-1 text-sm text-fg-muted">转换或删除字符，支持压缩重复字符。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/uniq" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">uniq</h3> <p class="mt-1 text-sm text-fg-muted">过滤相邻重复行，常与 sort 搭配使用。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/wc" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">wc</h3> <p class="mt-1 text-sm text-fg-muted">统计文本的行数、词数、字节/字符数。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a><a href="/commands/xargs" class="block glass rounded-xl p-5 card-hover reveal interactive hover:bg-white/10 active:bg-white/15" data-tags="文本处理"> <h3 class="text-base font-semibold">xargs</h3> <p class="mt-1 text-sm text-fg-muted">将标准输入拼接为命令参数并批量执行。</p> <div class="mt-3 flex flex-wrap gap-1.5"> <span class="px-2 py-0.5 text-[11px] rounded border border-white/10 text-fg-muted">文本处理</span> </div> </a> </section>  </main> <!-- Inline client scripts to ensure they run in static builds --> <script>
      // Reveal on enter
      const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches
      const hasIO = 'IntersectionObserver' in window
      function showAll() {
        document.querySelectorAll('.reveal').forEach((el) => {
          el.classList.remove('hide')
          el.classList.add('show')
        })
      }
      function applyHide() {
        document.querySelectorAll('.reveal:not(.vt-observed)').forEach((el) => el.classList.add('hide'))
      }
      if (!reduced && hasIO) {
        const io = new IntersectionObserver((entries) => {
          for (const e of entries) {
            if (e.isIntersecting) {
              const el = e.target
              el.classList.remove('hide')
              el.classList.add('show')
              io.unobserve(e.target)
            }
          }
        }, { rootMargin: '0px 0px -10% 0px' })
        const observe = () => document.querySelectorAll('.reveal:not(.vt-observed)')
          .forEach((el) => { el.classList.add('vt-observed'); io.observe(el) })
        applyHide(); observe()
        document.addEventListener('vt:page-swapped', () => { applyHide(); observe() })
      } else {
        showAll(); document.addEventListener('vt:page-swapped', showAll)
      }
    </script> <script>
      // Minimal cross-page View Transitions using the native API
      function isModifierKey(e) { return e.metaKey || e.ctrlKey || e.shiftKey || e.altKey }
      function isInternal(a) { return a.origin === location.origin && !a.hasAttribute('download') && !a.target }
      let lastDetailHref = null
      async function load(url) {
        const res = await fetch(url, { headers: { 'X-Requested-With': 'view-transition' } })
        if (!res.ok) throw new Error('Failed to fetch: ' + url)
        const html = await res.text()
        const doc = new DOMParser().parseFromString(html, 'text/html')
        const nextMain = doc.querySelector('main')
        if (!nextMain) throw new Error('No <main> in target document')
        return { doc, nextMain }
      }
      async function navigate(url, replace = false, originEl = null, fromHref = null) {
        try {
          const { doc, nextMain } = await load(url)
          let nextTarget = doc.querySelector('[data-vt-target="card"]')
          const currentMain = document.querySelector('main')
          if (!currentMain) { location.href = url; return }
          const swap = () => {
            currentMain.replaceWith(nextMain)
            document.title = doc.title
            if (!replace) history.pushState({}, '', url)
            if (!replace) { window.scrollTo({ top: 0 }) }
            else {
              const s = history.state
              const y = s && typeof s.scrollY === 'number' ? s.scrollY : null
              if (y !== null) { requestAnimationFrame(() => requestAnimationFrame(() => window.scrollTo({ top: y }))) }
            }
            document.dispatchEvent(new CustomEvent('vt:page-swapped'))
          }
          if (document.startViewTransition) {
            if (replace && !nextTarget && fromHref) {
              const path = new URL(fromHref, location.origin).pathname
              nextTarget = (doc.querySelector(`a[href="${path}"]`) || doc.querySelector(`a[href$="${path}"]`))
            }
            if (originEl) { originEl.style.setProperty('view-transition-name', 'card-active'); originEl.classList.add('vt-no-blur') }
            if (nextTarget) nextTarget.style.setProperty('view-transition-name', 'card-active')
            const vt = document.startViewTransition(swap)
            vt.finished.finally(() => {
              if (originEl) { originEl.style.removeProperty('view-transition-name'); originEl.classList.remove('vt-no-blur') }
              if (nextTarget) nextTarget.style.removeProperty('view-transition-name')
            })
          } else swap()
        } catch { location.href = url }
      }
      document.addEventListener('click', (e) => {
        if (e.defaultPrevented) return
        const target = e.target
        if (!target) return
        const a = target.closest('a')
        if (!a) return
        if (e.button !== 0 || isModifierKey(e)) return
        if (!isInternal(a)) return
        e.preventDefault()
        try {
          const prev = history.state && typeof history.state === 'object' ? history.state : {}
          history.replaceState({ ...prev, scrollY: window.scrollY }, '', location.href)
        } catch {}
        try {
          const path = new URL(a.href).pathname
          lastDetailHref = path.startsWith('/commands/') ? path : lastDetailHref
        } catch {}
        navigate(a.href, false, a)
      })
      window.addEventListener('popstate', () => {
        const origin = document.querySelector('[data-vt-target="card"]')
        navigate(location.href, true, origin, lastDetailHref)
      })
    </script> <script>
      // Home page filter & tag menu
      let globalBound = false
      function mountFilter() {
        const form = document.querySelector('form[role="search"]')
        const input = form?.querySelector('input[name="q"]')
        const tagBtn = document.getElementById('tag-filter-btn')
        const tagMenu = document.getElementById('tag-menu')
        const tagLabel = document.getElementById('tag-filter-label')
        const grid = document.getElementById('cards')
        if (!form || !input || !grid) return
        if (form.dataset.bound === '1') return
        form.dataset.bound = '1'
        const cards = Array.from(grid.querySelectorAll('a[href^="/commands/"]'))
        const items = cards.map((el) => ({
          el,
          text: `${(el.textContent || '').toLowerCase()} ${el.getAttribute('href') || ''}`,
          tags: (el.getAttribute('data-tags') || '').split(',').filter(Boolean)
        }))
        let nores = document.getElementById('no-results')
        if (!nores) {
          nores = document.createElement('p')
          nores.id = 'no-results'
          nores.className = 'mt-8 text-center text-fg-muted'
          nores.textContent = '未找到匹配的命令'
          nores.style.display = 'none'
          grid.after(nores)
        }
        function apply(q, tag) {
          const needle = (q || '').trim().toLowerCase()
          const t = (tag || '').trim()
          let shown = 0
          for (const { el, text, tags } of items) {
            const okText = !needle || text.includes(needle)
            const okTag = !t || tags.includes(t)
            const ok = okText && okTag
            el.classList.toggle('hidden', !ok)
            if (ok) shown++
          }
          if (nores) nores.style.display = shown ? 'none' : ''
        }
        function updateHistory(q, tag) {
          const url = new URL(location.href)
          if (q) url.searchParams.set('q', q); else url.searchParams.delete('q')
          if (tag) url.searchParams.set('tag', tag); else url.searchParams.delete('tag')
          const prev = history.state && typeof history.state === 'object' ? history.state : {}
          const nextState = { ...prev, q, tag }
          history.replaceState(nextState, '', url.toString())
        }
        form.addEventListener('submit', (e) => {
          e.preventDefault()
          const visible = items.filter(({ el }) => !el.classList.contains('hidden'))
          if (visible.length === 1) visible[0].el.click()
        })
        input.addEventListener('input', () => {
          const tag = tagBtn?.dataset.value || ''
          apply(input.value, tag)
          updateHistory(input.value, tag)
        })
        function getTagBtn() { return document.getElementById('tag-filter-btn') }
        function getTagMenu() { return document.getElementById('tag-menu') }
        function getTagLabel() { return document.getElementById('tag-filter-label') }
        function openMenu() {
          const btn = getTagBtn(); const menu = getTagMenu(); if (!menu || !btn) return
          menu.style.minWidth = `${btn.offsetWidth}px`
          menu.classList.remove('hidden')
          btn.setAttribute('aria-expanded', 'true')
        }
        function closeMenu() {
          const btn = getTagBtn(); const menu = getTagMenu(); if (!menu || !btn) return
          menu.classList.add('hidden')
          btn.setAttribute('aria-expanded', 'false')
        }
        function toggleMenu() { const menu = getTagMenu(); if (!menu) return; menu.classList.contains('hidden') ? openMenu() : closeMenu() }
        tagBtn?.addEventListener('click', (e) => { e.preventDefault(); toggleMenu() })
        if (!globalBound) {
          document.addEventListener('pointerdown', (e) => {
            const t = e.target
            if (!t) return
            const menu = getTagMenu(); const btn = getTagBtn()
            if (t.closest('#tag-menu') || t.closest('#tag-filter-btn')) return
            if (menu && btn) closeMenu()
          })
          document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { const menu = getTagMenu(); if (menu && !menu.classList.contains('hidden')) closeMenu() } })
          globalBound = true
        }
        tagMenu?.addEventListener('click', (e) => {
          const btn = e.target?.closest('[data-tag]')
          if (!btn) return
          const value = btn.getAttribute('data-tag') || ''
          const realBtn = getTagBtn(); const label = getTagLabel(); const menu = getTagMenu()
          if (realBtn) realBtn.dataset.value = value
          if (label) label.textContent = value || '全部标签'
          menu?.querySelectorAll('[role="menuitemradio"]').forEach((el) => el.setAttribute('aria-checked', String(el.getAttribute('data-tag') === value)))
          apply(input.value, value)
          updateHistory(input.value, value)
          closeMenu()
        })
        input.addEventListener('keydown', (e) => { if (e.key === 'Escape') { input.value = ''; apply('') } })
        const params = new URLSearchParams(location.search)
        const state = (history.state && typeof history.state === 'object') ? history.state : {}
        const initialQ = state.q ?? params.get('q') ?? ''
        const initialTag = state.tag ?? params.get('tag') ?? ''
        if (initialQ) input.value = initialQ
        if (tagBtn) tagBtn.dataset.value = initialTag
        const label = getTagLabel(); if (label) label.textContent = initialTag || '全部标签'
        getTagMenu()?.querySelectorAll('[role="menuitemradio"]').forEach((el) => el.setAttribute('aria-checked', String(el.getAttribute('data-tag') === (initialTag || ''))))
        apply(input.value, initialTag)
        updateHistory(input.value, initialTag)
      }
      mountFilter(); document.addEventListener('vt:page-swapped', mountFilter)
    </script> <script>
      // Back link behavior on detail pages
      function bindBack() {
        const el = document.getElementById('back-link')
        if (!el || el.dataset.bound === '1') return
        el.dataset.bound = '1'
        el.addEventListener('click', (e) => {
          e.preventDefault()
          if (history.length > 1) history.back()
          else location.href = '/'
        })
      }
      bindBack(); document.addEventListener('vt:page-swapped', bindBack)
    </script>  </body> </html>